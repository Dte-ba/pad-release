{"version":3,"sources":["index.js"],"names":["osenv","require","path","fs","util","moment","ProgressBar","localConfig","join","home","process","env","PAD_MODE","REPOSITORY_PATH","existsSync","cfg","JSON","parse","readFileSync","pad","bar","complete","incomplete","width","total","started","Date","startServer","progress","info","percent","update","fail","err","done","console","log","config","port","app","get","on","inspect"],"mappings":"AAAA;;;;AAIA;;AAEA,IAAIA,QAAQC,QAAQ,OAAR,CAAZ;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;AACA,IAAIE,KAAKF,QAAQ,IAAR,CAAT;AACA,IAAIG,OAAOH,QAAQ,MAAR,CAAX;AACA,IAAII,SAASJ,QAAQ,QAAR,CAAb;;AAEA,IAAIK,cAAcL,QAAQ,UAAR,CAAlB;;AAEA,IAAIM,cAAcL,KAAKM,IAAL,CAAUR,MAAMS,IAAN,EAAV,EAAwB,MAAxB,CAAlB;;AAEAC,QAAQC,GAAR,CAAYC,QAAZ,GAAuB,QAAvB;AACAF,QAAQC,GAAR,CAAYE,eAAZ,GAA8BX,KAAKM,IAAL,CAAUR,MAAMS,IAAN,EAAV,CAA9B;;AAEA,IAAIN,GAAGW,UAAH,CAAcP,WAAd,CAAJ,EAA+B;AAC7B,MAAIQ,MAAMC,KAAKC,KAAL,CAAWd,GAAGe,YAAH,CAAgBX,WAAhB,EAA6B,OAA7B,CAAX,CAAV;AACAG,UAAQC,GAAR,CAAYE,eAAZ,GAA8BE,IAAIb,IAAlC;AACD;;AAED,IAAIiB,MAAMlB,QAAQ,UAAR,CAAV;;AAEA,IAAImB,MAAM,IAAId,WAAJ,CAAgB,qCAAhB,EAAuD;AAC/De,YAAU,GADqD;AAE/DC,cAAY,GAFmD;AAG/DC,SAAO,EAHwD;AAI/DC,SAAO;AAJwD,CAAvD,CAAV;;AAOA,IAAIC,UAAU,IAAIC,IAAJ,EAAd;;AAEAP,IACGQ,WADH,GAEGC,QAFH,CAEY,UAASC,IAAT,EAAc;;AAEzB,MAAIC,UAAUD,KAAKD,QAAnB;AACGR,MAAIW,MAAJ,CAAWD,OAAX;AAED,CAPH,EAQGE,IARH,CAQQ,UAASC,GAAT,EAAa;AACjB,QAAMA,GAAN;AACD,CAVH,EAWGC,IAXH,CAWQ,YAAU;AACdC,UAAQC,GAAR,CAAY,4CAAZ,EAA0DjB,IAAIkB,MAAJ,CAAWC,IAArE,EAA2EnB,IAAIoB,GAAJ,CAAQC,GAAR,CAAY,KAAZ,CAA3E;AACD,CAbH;;AAeA,IAAIrB,IAAIoB,GAAJ,CAAQC,GAAR,CAAY,KAAZ,MAAuB,YAA3B,EAAyC;AACvC9B,UAAQ+B,EAAR,CAAW,mBAAX,EAAgC,UAASR,GAAT,EAAc;AAC5CE,YAAQC,GAAR,CAAY,oBAAZ;AACAD,YAAQC,GAAR,CAAYhC,KAAKsC,OAAL,CAAaT,GAAb,CAAZ;AACD,GAHD;AAID","file":"index.js","sourcesContent":["/**\n * Index application file\n */\n\n'use strict';\n\nvar osenv = require('osenv');\nvar path = require('path');\nvar fs = require('fs');\nvar util = require('util');\nvar moment = require('moment');\n\nvar ProgressBar = require('progress');\n\nvar localConfig = path.join(osenv.home(), '.pad');\n\nprocess.env.PAD_MODE = 'server';\nprocess.env.REPOSITORY_PATH = path.join(osenv.home());\n\nif (fs.existsSync(localConfig)){\n  var cfg = JSON.parse(fs.readFileSync(localConfig, 'utf-8'));\n  process.env.REPOSITORY_PATH = cfg.path;\n}\n\nvar pad = require('./app.js');\n\nvar bar = new ProgressBar(' Cargando contenido [:bar] :percent', {\n  complete: '=',\n  incomplete: ' ',\n  width: 20,\n  total: 100\n});\n\nvar started = new Date();\n\npad\n  .startServer()\n  .progress(function(info){\n    \n\tvar percent = info.progress;\n    bar.update(percent);\n\n  })\n  .fail(function(err){\n    throw err;\n  })\n  .done(function(){\n    console.log('Express server listening on %d, in %s mode', pad.config.port, pad.app.get('env'));\n  });\n\nif (pad.app.get('env') === \"production\") {\n  process.on('uncaughtException', function(err) {\n    console.log('Caught exception: ');\n    console.log(util.inspect(err))\n  });\n}"],"sourceRoot":"/source/"}