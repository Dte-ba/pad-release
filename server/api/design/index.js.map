{"version":3,"sources":["api/design/index.js"],"names":["_","require","fs","path","express","design","router","Router","get","req","res","encuadres","err","set","json","manager","areas","name","params","areaByName","area","ejes","eje","bloques","transversales","trans","module","exports"],"mappings":"AAAA;;;;;;;;;AASA;;AAEA,IAAIA,IAAIC,QAAQ,QAAR,CAAR;AACA,IAAIC,KAAKD,QAAQ,IAAR,CAAT;AACA,IAAIE,OAAOF,QAAQ,MAAR,CAAX;AACA,IAAIG,UAAUH,QAAQ,SAAR,CAAd;;AAEA,IAAII,SAASJ,QAAQ,yBAAR,CAAb;;AAEA,IAAIK,SAASF,QAAQG,MAAR,EAAb;;AAEAD,OAAOE,GAAP,CAAW,YAAX,EAAyB,UAASC,GAAT,EAAcC,GAAd,EAAmB;;AAE1CL,SAAOM,SAAP,CAAiB,UAASC,GAAT,EAAcD,SAAd,EAAwB;AACvCD,QAAIG,GAAJ,CAAQ,EAAE,gBAAgB,iCAAlB,EAAR;AACAH,QAAII,IAAJ,CAASH,SAAT;AACD,GAHD;AAKD,CAPD;;AASAL,OAAOE,GAAP,CAAW,QAAX,EAAqB,UAASC,GAAT,EAAcC,GAAd,EAAmB;AACtCL,SAAOU,OAAP,CAAeC,KAAf,CAAqB,KAArB,EAA4B,UAASJ,GAAT,EAAcI,KAAd,EAAoB;AAC9CN,QAAIG,GAAJ,CAAQ,EAAE,gBAAgB,iCAAlB,EAAR;AACAH,QAAII,IAAJ,CAASE,KAAT;AACD,GAHD;AAKD,CAND;;AAQAV,OAAOE,GAAP,CAAW,aAAX,EAA0B,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAC3C,MAAIO,OAAOR,IAAIS,MAAJ,CAAWD,IAAtB;;AAEAZ,SAAOc,UAAP,CAAkBF,IAAlB,EAAwB,UAASL,GAAT,EAAcQ,IAAd,EAAmB;AACzCV,QAAIG,GAAJ,CAAQ,EAAE,gBAAgB,iCAAlB,EAAR;AACAH,QAAII,IAAJ,CAASM,IAAT;AACD,GAHD;AAKD,CARD;;AAUAd,OAAOE,GAAP,CAAW,aAAX,EAA0B,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAC3C,MAAIU,OAAOX,IAAIS,MAAJ,CAAWE,IAAtB;;AAEAf,SAAOgB,IAAP,CAAYD,IAAZ,EAAkB,UAASR,GAAT,EAAcS,IAAd,EAAmB;AACnCX,QAAIG,GAAJ,CAAQ,EAAE,gBAAgB,iCAAlB,EAAR;AACAH,QAAII,IAAJ,CAASO,IAAT;AACD,GAHD;AAKD,CARD;;AAUAf,OAAOE,GAAP,CAAW,qBAAX,EAAkC,UAASC,GAAT,EAAcC,GAAd,EAAmB;AACnD,MAAIU,OAAOX,IAAIS,MAAJ,CAAWE,IAAtB;AACA,MAAIE,MAAMb,IAAIS,MAAJ,CAAWI,GAArB;;AAEAjB,SAAOkB,OAAP,CAAeH,IAAf,EAAqBE,GAArB,EAA0B,UAASV,GAAT,EAAcW,OAAd,EAAsB;AAC9Cb,QAAIG,GAAJ,CAAQ,EAAE,gBAAgB,iCAAlB,EAAR;AACAH,QAAII,IAAJ,CAASS,OAAT;AACD,GAHD;AAKD,CATD;;AAWAjB,OAAOE,GAAP,CAAW,gBAAX,EAA6B,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAC9CL,SAAOmB,aAAP,CAAqB,UAASZ,GAAT,EAAca,KAAd,EAAoB;AACvCf,QAAIG,GAAJ,CAAQ,EAAE,gBAAgB,iCAAlB,EAAR;AACAH,QAAII,IAAJ,CAASW,KAAT;AACD,GAHD;AAKD,CAND;;AAQAC,OAAOC,OAAP,GAAiBrB,MAAjB","file":"api/design/index.js","sourcesContent":["/**\n * Using Rails-like standard naming convention for endpoints.\n * GET     /things              ->  index\n * POST    /things              ->  create\n * GET     /things/:id          ->  show\n * PUT     /things/:id          ->  update\n * DELETE  /things/:id          ->  destroy\n */\n\n'use strict';\n\nvar _ = require('lodash');\nvar fs = require('fs');\nvar path = require('path');\nvar express = require('express');\n\nvar design = require('../../components/design');\n\nvar router = express.Router();\n\nrouter.get('/encuadres', function(req, res) {\n\n  design.encuadres(function(err, encuadres){\n    res.set({ 'content-type': 'application/json; charset=utf-8' });\n    res.json(encuadres);\n  });\n  \n});\n\nrouter.get('/areas', function(req, res) {\n  design.manager.areas(false, function(err, areas){\n    res.set({ 'content-type': 'application/json; charset=utf-8' });\n    res.json(areas);\n  });\n  \n});\n\nrouter.get('/area/:name', function(req, res) {\n  var name = req.params.name;\n\n  design.areaByName(name, function(err, area){\n    res.set({ 'content-type': 'application/json; charset=utf-8' });\n    res.json(area);\n  });\n  \n});\n\nrouter.get('/ejes/:area', function(req, res) {\n  var area = req.params.area;\n\n  design.ejes(area, function(err, ejes){\n    res.set({ 'content-type': 'application/json; charset=utf-8' });\n    res.json(ejes);\n  });\n  \n});\n\nrouter.get('/bloques/:area/:eje', function(req, res) {\n  var area = req.params.area;\n  var eje = req.params.eje;\n\n  design.bloques(area, eje, function(err, bloques){\n    res.set({ 'content-type': 'application/json; charset=utf-8' });\n    res.json(bloques);\n  });\n  \n});\n\nrouter.get('/transversales', function(req, res) {\n  design.transversales(function(err, trans){\n    res.set({ 'content-type': 'application/json; charset=utf-8' });\n    res.json(trans);\n  });\n  \n});\n\nmodule.exports = router;"],"sourceRoot":"/source/"}